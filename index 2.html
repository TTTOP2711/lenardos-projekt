<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trailmap</title>

  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />

  <style>
    html, body {
      margin: 0;
      height: 100%;
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
    }
    #map {
	
      height: 50%;
      width: 50%;
	position: absolute;
      top: 200px;
      right: 100px;
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1000;
 border-radius: 10px;

    }

    /* --- Navbar --- */
    .navbar {
      position: absolute;
      top: 10px;
      right: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1000;
    }

    .icon-button {
      background: rgba(255, 255, 255, 0.9);
      border: none;
      border-radius: 8px;
      cursor: pointer;
      padding: 6px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .icon-button img {
      width: 30px;
      height: 30px;
      border-radius: 6px;
    }

    /* --- Mini-Karte f√ºr Kartenwechsel --- */
    .mini-map {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      overflow: hidden;
    }

    /* --- Dialog f√ºr Kartenart --- */
    .map-dialog {
      position: absolute;
      top: 60px;
      right: 10px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      padding: 10px;
      display: none;
      z-index: 1500;
    }

    .map-dialog h4 {
      margin: 5px 0;
    }

    .map-dialog button {
      display: block;
      width: 100%;
      border: none;
      background: #eee;
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      cursor: pointer;
    }

    .map-dialog button:hover {
      background: #0078A8;
      color: white;
    }

    /* --- Punkt-Dialog --- */
    .popup-form label {
      display: block;
      margin-top: 5px;
      font-weight: bold;
    }

    select, input {
      width: 100%;
      padding: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    /* --- Profil-Men√º --- */
    .profile-dialog {
      position: absolute;
      top: 60px;
      right: 60px;
      background: white;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      display: none;
      z-index: 1500;
    }

    .profile-dialog h4 {
      margin: 5px 0;
    }

    .profile-dialog input {
      width: 100%;
      margin-top: 5px;
    }
  </style>
</head>
<body>
<form>

  <p style="
    border: 5px solid #999;
 border-radius: 10px;
    padding: 30px;
    width: 80%;
    height: 5%;
    //overflow-y: auto;
    white-space: pre-line;
position: absolute;
      top: 1px;
     left: 40px;
	text-align: center;
	font-size: 80px;"
>Lenardo¬¥s Webseite Trails
  </p>

  <p style="
    border: 5px solid #999;
 border-radius: 10px;
    padding: 30px;
    width: 30%;
    height: 40%;
    overflow-y: auto;
    white-space: pre-line;
position: absolute;
      top: 180px;
     left: 40px;
font-size: 28px;">
Hier kommt
jetzt
der Text
√ºeberb sfsd
Eine beschreibung was √ºber haupt gemacht werden soll
so ewas wie eine anleitung
SDFsdfsdf
SDFsfsdf
  </p>
</form>

  <!-- Navbar -->
  <div class="navbar">
    <button id="mapTypeBtn" class="icon-button mini-map">
      <img src="https://cdn-icons-png.flaticon.com/512/854/854929.png" alt="Karte">
    </button>
    <button id="profileBtn" class="icon-button">
      <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="Profil">
    </button>
  </div>

  <!-- Dialog f√ºr Kartenart -->
  <div id="mapDialog" class="map-dialog">
    <h4>Kartenart w√§hlen:</h4>
    <button id="normalMap">üó∫Ô∏è Stra√üe</button>
    <button id="satelliteMap">üõ∞Ô∏è Satellit</button>
  </div>

  <!-- Profil Dialog -->
  <div id="profileDialog" class="profile-dialog">
    <h4>Profil</h4>
    <label>Name:</label>
    <input type="text" id="username" placeholder="Dein Name">
    <label>Profilbild:</label>
    <input type="file" id="profilePic" accept="image/*">
    <label>Hintergrundbild:</label>
    <input type="file" id="bgPic" accept="image/*">
  </div>

  <!-- Hauptkarte -->
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    // --- Karte initialisieren ---
	//50.675151474034315, 10.907772296563193 Koordinaten Ilmenau
    const map = L.map('map').setView([50.675151474034315, 10.907772296563193], 13);

    const normalLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '¬© OpenStreetMap-Mitwirkende'
    });

    const satelliteLayer = L.tileLayer(
      'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
      {
        maxZoom: 19,
        attribution: '¬© Esri, Maxar, Earthstar Geographics'
      }
    );

    normalLayer.addTo(map);
    let currentLayer = normalLayer;

    // --- Kartenwechsel √ºber Mini-Karte ---
    const mapDialog = document.getElementById("mapDialog");
    document.getElementById("mapTypeBtn").addEventListener("click", () => {
      mapDialog.style.display = mapDialog.style.display === "block" ? "none" : "block";
    });

    document.getElementById("normalMap").addEventListener("click", () => {
      if (currentLayer !== normalLayer) {
        map.removeLayer(currentLayer);
        map.addLayer(normalLayer);
        currentLayer = normalLayer;
      }
      mapDialog.style.display = "none";
    });

    document.getElementById("satelliteMap").addEventListener("click", () => {
      if (currentLayer !== satelliteLayer) {
        map.removeLayer(currentLayer);
        map.addLayer(satelliteLayer);
        currentLayer = satelliteLayer;
      }
      mapDialog.style.display = "none";
    });

    // --- Punkt hinzuf√ºgen ---
    map.on("click", async (e) => {
      const lat = e.latlng.lat.toFixed(5);
      const lng = e.latlng.lng.toFixed(5);

      const name = prompt("Name des Punktes:");
      if (!name) return;

      const type = prompt(
        "Typ ausw√§hlen:\n1 = Werkstatt\n2 = Trail (blau)\n3 = Trail (rot)\n4 = Trail (schwarz)\n5 = Enduro Trail\n6 = Sonstiges"
      );
      let color = "gray";
      let typeText = "Sonstiges";

      switch (type) {
        case "1": color = "orange"; typeText = "Werkstatt"; break;
        case "2": color = "blue"; typeText = "Trail (blau)"; break;
        case "3": color = "red"; typeText = "Trail (rot)"; break;
        case "4": color = "black"; typeText = "Trail (schwarz)"; break;
        case "5": color = "purple"; typeText = "Enduro Trail"; break;
        case "6": 
          typeText = prompt("Bitte Typ angeben:");
          color = "gray"; 
          break;
      }

      const marker = L.circleMarker([lat, lng], {
        color: color,
        radius: 8,
        fillOpacity: 0.8
      }).addTo(map);

      marker.bindPopup(`
        <b>${name}</b><br>${typeText}<br>
        <button onclick="deleteMarker(${lat}, ${lng})">L√∂schen</button>
      `);
    });

    // --- Marker l√∂schen ---
    window.deleteMarker = function(lat, lng) {
      map.eachLayer(layer => {
        if (layer.getLatLng && layer.getLatLng().lat.toFixed(5) == lat && layer.getLatLng().lng.toFixed(5) == lng) {
          map.removeLayer(layer);
        }
      });
    };

    // --- Profilmen√º ---
    const profileDialog = document.getElementById("profileDialog");
    document.getElementById("profileBtn").addEventListener("click", () => {
      profileDialog.style.display = profileDialog.style.display === "block" ? "none" : "block";
    });
  </script>
</body>
</html>
